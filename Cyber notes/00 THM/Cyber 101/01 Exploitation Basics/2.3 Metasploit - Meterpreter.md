https://tryhackme.com/room/meterpreter

### Table of contents
- [[#Intro]]
- [[#Tools]]
- [[#Post-Exploitation]]

___
### Intro 
[[#Table of contents|Back to the top]]

Acts as agent within **command and control** architecture

Runs in target system **RAM** without being installed on disk --> avoids detection, seen as process not as file

Avoid network-based IPS (Intrusion Prevention System) and IDS (Intrusion Detection System): **encrypted communication** (TLS) with attacking machine

**`getpid`**: returns process id of meterpreter (useful when needing to shut down the process for instance)

***Most antivirus still detect it***

___
### Tools
[[#Table of contents|Back to the top]]

`msfvenom --list payloads | grep meterpreter`: lists payloads and returns ones containing word 'meterpreter'

Factors to select proper Meterpreter version
- Target **OS**
- Available **components** on target system (Python, PHP, ...)
- **Network connection** type with target system (TCP, HTTPS, IPv6 not as closely monitored as IPv4?, ...)

Tools
- Built-in commands (`help`)
- Tools
- Scripting

**[[Meterpreter Commands]]**

___
### Post-Exploitation
[[#Table of contents|Back to the top]]

Goals
- Gather further information about target system
- Look for interesting files, user credentials, additional network interfaces
- Privilege escalation
- Lateral movement

**`getuid`**: display user with which Meterpreter is running --> idea of privilege

**`ps`** --> PID gives information needed to migrate Meterpreter to another process in order to interact with it
	**`migrate [PID]`**, careful not to migrate to lower privileged process

For instance, migrate to word processor, `keyscan_start`, `keyscan_stop`, `keyscan_dump` --> Meterpreter acts as ***keylogger***

**`hashdump`**: list content of **SAM** (Security Account Management) database, **NTLM** (Net Technology LAN Manager) format
	--> crack the hash or pass the hash

**`search -f [file_name]`**

**`shell`**

**`load`**: load additional tool